module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");inherits(Stream,EE),Stream.Readable=require("readable-stream/lib/_stream_readable.js"),Stream.Writable=require("readable-stream/lib/_stream_writable.js"),Stream.Duplex=require("readable-stream/lib/_stream_duplex.js"),Stream.Transform=require("readable-stream/lib/_stream_transform.js"),Stream.PassThrough=require("readable-stream/lib/_stream_passthrough.js"),Stream.finished=require("readable-stream/lib/internal/streams/end-of-stream.js"),Stream.pipeline=require("readable-stream/lib/internal/streams/pipeline.js"),Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(r,t){var e=this;function s(o){r.writable&&r.write(o)===!1&&e.pause&&e.pause()}e.on("data",s);function l(){e.readable&&e.resume&&e.resume()}r.on("drain",l),!r._isStdio&&(!t||t.end!==!1)&&(e.on("end",u),e.on("close",m));var i=!1;function u(){i||(i=!0,r.end())}function m(){i||(i=!0,typeof r.destroy=="function"&&r.destroy())}function a(o){if(n(),EE.listenerCount(this,"error")===0)throw o}e.on("error",a),r.on("error",a);function n(){e.removeListener("data",s),r.removeListener("drain",l),e.removeListener("end",u),e.removeListener("close",m),e.removeListener("error",a),r.removeListener("error",a),e.removeListener("end",n),e.removeListener("close",n),r.removeListener("close",n)}return e.on("end",n),e.on("close",n),r.on("close",n),r.emit("pipe",e),r};
